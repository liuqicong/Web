webpackJsonp([27],{"8Ias":function(t,e,r){"use strict";function a(t){w||r("Zr6e")}Object.defineProperty(e,"__esModule",{value:!0});var n=r("ABCa"),i=r("rGqP"),o=r("odqc"),s=r("Znkm"),c=r("62KO"),l=r("ghf0"),d=(n.a,i.a,o.a,s.a,l.a,c.a,{components:{XHeader:n.a,Divider:i.a,Tab:o.a,TabItem:s.a,Scroll:l.a,Confirm:c.a},data:function(){return{id:"",withdraw:!1,switchIndex:0,afterSaleList:[],listenScroll:!0,pullup:!0,hasMore:!0,inited:!1,switchArr:[0,1,2,3,4],pageNo:1}},methods:{goBack:function(){this.$router.push({path:"/afterSale"})},setType:function(t){var e="";switch(t){case 1:e="多发";break;case 2:e="错发";break;case 3:e="漏发";break;case 4:e="到货残次";break;case 6:e="质量评估"}return e},setClientStatus:function(t){var e="";switch(t){case 1:e="审核中";break;case 2:e="已完成";break;case 3:e="未通过";break;case 4:e="已撤回"}return e},setStatus:function(t){var e="";switch(t){case 1:e="待物流审核";break;case 3:e="物流已审核";break;case 4:e="物流不同意";break;case 5:e="客服不同意";break;case 6:case 7:e="客服已审核";break;case 9:e="未能生成售后订单";break;case 10:e="特殊处理";break;case 11:e="已生成售后订单"}return e},switchTabItem:function(t){this.switchIndex=t,this.pageNo=1,this.afterSaleList=[],this._getAfterSale(this.switchArr[this.switchIndex])},loadMore:function(){this.hasMore&&(this.pageNo++,this._getAfterSale(this.switchArr[this.switchIndex]))},toDetail:function(t){this.$router.push({path:"/afterSaleDetail",query:{index:this.switchIndex,id:t}})},toWithdraw:function(t){this.withdraw=!0,this.id=t},onWithdraw:function(){var t=this,e=[{status:2,id:this.id}];this.$tupHttp(this,"front/declaration/updateDeclaration","POST",e).then(function(e){t.$vux.toast.text("撤回成功"),t.pageNo=1,t.afterSaleList=[],t._getAfterSale(t.switchArr[t.switchIndex])})},toEdit:function(t){this.$router.push({path:"/afterSaleEdit",query:{index:this.switchIndex,id:t}})},_getAfterSale:function(t){var e=this,r={pagingQuery:{pageIndex:this.pageNo,pageSize:20},clientStatus:t,orderBy:[{field:"update_time",order:0}]};this.inited=!1,this.$tupHttp(this,"front/declaration/getListByPage","POST",r).then(function(t){e.inited=!0,e.afterSaleList=e.afterSaleList.concat(t.data.models.map(function(t){return t.typeText=e.setType(t.type),t.clientStatusText=e.setClientStatus(t.clientStatus),t.statusText=e.setStatus(t.status),t})),t.data.models.length<20&&(e.hasMore=!1),setTimeout(function(){e.$refs.scroll.refresh()},200)})}},created:function(){var t=this.$route.query.index||0;this.switchIndex=Number(t),this._getAfterSale(this.switchArr[Number(t)])}}),p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("transition",{attrs:{name:"slide"}},[r("div",{staticClass:"order-wrapper page-container"},[r("x-header",{staticClass:"vux-1px-b",attrs:{title:"售后申请记录","left-options":{backText:"",preventGoBack:!0}},on:{"on-click-back":t.goBack}}),t._v(" "),r("div",{staticClass:"order-tab"},[r("tab",{staticStyle:{width:"100%"},attrs:{"prevent-default":"","line-width":0,"custom-bar-width":"18px"},on:{"on-before-index-change":t.switchTabItem},model:{value:t.switchIndex,callback:function(e){t.switchIndex=e},expression:"switchIndex"}},[r("tab-item",[t._v("全部")]),t._v(" "),r("tab-item",[t._v("审核中")]),t._v(" "),r("tab-item",[t._v("已完成")]),t._v(" "),r("tab-item",[t._v("未通过")]),t._v(" "),r("tab-item",[t._v("已撤回")])],1)],1),t._v(" "),r("scroll",{ref:"scroll",staticClass:"scroll-wrapper",attrs:{listenScroll:t.listenScroll,pullup:t.pullup},on:{scrollToEnd:t.loadMore}},[r("div",{staticClass:"order-content"},[t._l(t.afterSaleList,function(e){return r("div",{key:e.sbno,staticClass:"order-item vux-1px-b"},[r("p",{staticClass:"order-no"},[t._v("申报号：\n            "),r("span",[t._v(t._s(e.sbno))]),t._v(" "),r("span",{staticClass:"fr"},[t._v(t._s(e.clientStatusText))])]),t._v(" "),r("p",{staticClass:"order-time"},[t._v("申报类型："+t._s(e.typeText)+"\n            "),r("span",{staticClass:"fr"},[t._v(t._s(e.statusText))])]),t._v(" "),r("p",{staticStyle:{overflow:"hidden"}},[4!=e.clientStatus?r("span",{staticClass:"saleMake fr",on:{click:function(r){return t.toDetail(e.id)}}},[t._v("查看详情")]):t._e(),t._v(" "),1==e.clientStatus?r("span",{staticClass:"saleMake fr",on:{click:function(r){return t.toWithdraw(e.id)}}},[t._v("撤回申请")]):t._e(),t._v(" "),3==e.clientStatus||4==e.clientStatus?r("span",{staticClass:"saleMake fr",on:{click:function(r){return t.toEdit(e.id)}}},[t._v("修改申请")]):t._e()])])}),t._v(" "),r("divider",{directives:[{name:"show",rawName:"v-show",value:!t.hasMore&&t.afterSaleList.length,expression:"!hasMore && afterSaleList.length"}]},[t._v("没有更多了...")])],2)]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!t.afterSaleList.length&&t.inited,expression:"!afterSaleList.length && inited"}],staticClass:"no-result"},[r("i",{staticClass:"icon-no"}),t._v(" "),r("p",[t._v("列表空空如也~")])]),t._v(" "),r("router-view"),t._v(" "),r("confirm",{attrs:{title:"您确认要撤回申请？"},on:{"on-confirm":t.onWithdraw},model:{value:t.withdraw,callback:function(e){t.withdraw=e},expression:"withdraw"}})],1)])},u=[];p._withStripped=!0;var h={render:p,staticRenderFns:u},f=h,w=!1,b=r("VU/8"),v=a,x=b(d,f,!1,v,null,null);x.options.__file="src/components/afterSale/afterSaleList.vue";e.default=x.exports},"T+Qo":function(t,e,r){e=t.exports=r("FZ+f")(!1),e.push([t.i,"\n.order-wrapper .fr {\n  float: right;\n}\n.order-wrapper .saleMake {\n  padding-left: 10px;\n  color: #2a5b97;\n  text-decoration: underline;\n}\n.order-wrapper .order-tab {\n  width: 100%;\n  background-color: #fff;\n}\n.order-wrapper .order-tab .vux-tab-wrap {\n  padding-top: 35px;\n  margin: 0 auto;\n}\n.order-wrapper .order-tab .vux-tab-container,\n.order-wrapper .order-tab .vux-tab {\n  height: 35px;\n}\n.order-wrapper .order-tab .vux-tab-item {\n  line-height: 35px;\n  background: none;\n}\n.order-wrapper .order-tab .vux-tab-selected {\n  position: relative;\n}\n.order-wrapper .order-tab .vux-tab-selected:after {\n  content: '';\n  width: 18px;\n  height: 3px;\n  background-color: #ec6868;\n  position: absolute;\n  bottom: 0;\n  right: 40%;\n}\n.order-wrapper .order-tab .scrollable {\n  padding-bottom: 0;\n}\n.order-wrapper .order-tab .scrollable .vux-tab-item {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n}\n.order-wrapper .order-tab .scrollable .vux-tab-ink-bar {\n  bottom: 0;\n}\n.order-wrapper .order-tab .vux-tab-selected {\n  font-weight: bold;\n}\n.order-wrapper .scroll-wrapper {\n  top: 84px;\n}\n.order-wrapper .scroll-wrapper .order-content {\n  background-color: #fff;\n}\n.order-wrapper .scroll-wrapper .order-content .order-item {\n  padding: 10px 0;\n  margin: 0 15px;\n  position: relative;\n}\n.order-wrapper .scroll-wrapper .order-content .order-item .order-no {\n  font-size: 14px;\n  color: #343434;\n}\n.order-wrapper .scroll-wrapper .order-content .order-item .order-no span {\n  font-weight: bold;\n}\n.order-wrapper .scroll-wrapper .order-content .order-item .order-time {\n  font-size: 12px;\n  color: #9b9b9b;\n}\n.order-wrapper .scroll-wrapper .order-content .order-item i {\n  position: absolute;\n  right: 0;\n  top: 40%;\n  color: #d5d5d5;\n  font-size: 14px;\n}\n.order-wrapper .no-result {\n  text-align: center;\n  position: absolute;\n  width: 100%;\n  top: 40%;\n  color: #c9c9c9;\n}\n.order-wrapper .no-result i {\n  font-size: 90px;\n}\n.order-wrapper .no-result p {\n  font-size: 15px;\n}\n",""])},Zr6e:function(t,e,r){var a=r("T+Qo");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);r("rjj0")("7038511a",a,!1,{})}});
//# sourceMappingURL=27.820c84fb74fcf0d33763.js.map