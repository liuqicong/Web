webpackJsonp([60],{"+4jV":function(e,t,i){"use strict";function s(e){v||i("k24w")}Object.defineProperty(t,"__esModule",{value:!0});var n=i("ABCa"),r=i("/0UN"),o=i("hGvq"),a=i("rGqP"),c=i("ghf0"),p=i("/FMa"),u=(n.a,r.a,o.a,c.a,p.a,a.a,{data:function(){return{customerArr:[],listenScroll:!0,pullup:!0,hasMore:!0,inited:!1,pageNo:1,phoneNo:"",items1:[{key:"7",value:"近七天"},{key:"30",value:"一个月"},{key:"180",value:"半年"},{key:"365",value:"一年"}],arriveStoreArr:[{key:"1",value:"已到店"},{key:"0",value:"未到店"}],getBackArr:[{key:"1",value:"已领回"},{key:"0",value:"未领回"}],product_srvc_type:[{key:"",value:"全部"},{key:"1",value:"净水器"},{key:"2",value:"美食教做"},{key:"3",value:"锅具"},{key:"4",value:"43件套"},{key:"5",value:"营养品"},{key:"6",value:"纤巧壶"}],timeRange:{},proType:{key:"",value:"全部"},arriveStore:{},getBack:{},tip:0,tipArr:["我的客户","净水器","美食教做","锅具服务","43件套","营养品","纤巧壶"]}},watch:{proType:function(e){this.pageNo=1,this.customerArr=[],this.hasMore=!0,this._getCustomerList()},timeRange:function(e){this.pageNo=1,this.customerArr=[],this.hasMore=!0,this._getCustomerList()},arriveStore:function(e){this.pageNo=1,this.customerArr=[],this.hasMore=!0,this._getCustomerList()},getBack:function(e){this.pageNo=1,this.customerArr=[],this.hasMore=!0,this._getCustomerList()}},methods:{formSubmit:function(){return!1},loadMore:function(){this.hasMore&&(this.pageNo++,this._getCustomerList())},_getCustomerList:function(){var e=this;if(this.inited)return void this.$vux.toast.text("拼命请求中，请稍候");this.inited=!0;var t={pagingQuery:{pageIndex:this.pageNo,pageSize:20},phoneNo:this.phoneNo,types:this.proType.key?[parseInt(this.proType.key)]:[]},i="client-biz/client-biz/storeClient/clientList";0!==this.tip&&(t={arriveStore:this.arriveStore.key?parseInt(this.arriveStore.key):"",getBack:this.getBack.key?parseInt(this.getBack.key):"",pagingQuery:{pageIndex:this.pageNo,pageSize:20},phoneNo:this.phoneNo,timeRange:parseInt(this.timeRange.key),type:this.tip},i="client-biz/client-biz/storeClient/serviceList"),this.$tupHttp(this,i,"POST",t).then(function(t){e.inited=!1;var i=t.data.models.map(function(e){return e.createTime=e.createTime?new Date(e.createTime).format("yyyy-MM-dd hh:mm:ss"):e.createTime,e});1!==e.pageNo||e.customerArr.length?e.customerArr=e.customerArr.concat(i):e.customerArr=i,t.data.models.length<20&&(e.hasMore=!1),setTimeout(function(){e.$refs.scroll.refresh()},500)},function(){e.inited=!1}).catch(function(){e.inited=!1})},inputSearch:function(){this.pageNo=1,this.customerArr=[],this._getCustomerList()},toAddView:function(){this.$router.push({path:"/customerAdd",query:{phoneNo:this.customerArr.length||0!==this.tip||""!==this.proType.key?"":this.phoneNo}})},toDetailView:function(e,t){var i=t;0===i&&(i=this.proType.key?parseInt(this.proType.key):1),this.$router.push({path:"/customerSRV",query:{id:e,type:i}})},_getDicts:function(){var e=this,t=["product_srvc_type"];this.$tupHttp(this,"front/dict/getDicts","POST",t).then(function(t){e.product_srvc_type=t.data.model.product_srvc_type.map(function(e,t){var i={};return i.key=e.dictValue,i.value=e.dictName,i}),e.product_srvc_type.unshift({key:"",value:"全部"})})}},mounted:function(){this.tip=parseInt(this.$route.query.tip),this.phoneNo=this.$route.query.phoneNo,0===this.tip?this._getCustomerList():this.timeRange={key:"30",value:"一个月"}},components:{XHeader:n.a,Checker:r.a,CheckerItem:o.a,Scroll:c.a,Loading:p.a,Divider:a.a}}),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"slide"}},[i("div",{staticClass:"customerList-wrapper page-container"},[i("x-header",{staticClass:"vux-1px-b",attrs:{title:e.tipArr[e.tip],"left-options":{backText:""}}}),e._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"customerListTop"},[i("div",{staticClass:"search-box"},[i("div",{staticClass:"input-box"},[i("form",{attrs:{action:"javascript:return true"},on:{submit:function(t){return t.preventDefault(),e.formSubmit(t)}}},[i("i",{staticClass:"icon-search"}),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneNo,expression:"phoneNo"}],ref:"input",staticClass:"input",attrs:{type:"search",placeholder:"请输入客户手机号码"},domProps:{value:e.phoneNo},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.inputSearch(t)},input:function(t){t.target.composing||(e.phoneNo=t.target.value)}}})])]),e._v(" "),i("div",{staticClass:"addBtn",on:{click:e.toAddView}},[e._v("+ 添加")])]),e._v(" "),i("div",{staticClass:"searchBtn"},[0==e.tip?i("ul",{staticClass:"myCustomer"},[i("li",[i("checker",{attrs:{"radio-required":"","default-item-class":"check-item","selected-item-class":"check-item-selected"},model:{value:e.proType,callback:function(t){e.proType=t},expression:"proType"}},e._l(e.product_srvc_type,function(t,s){return i("checker-item",{key:s,attrs:{value:t}},[e._v(e._s(t.value))])}),1)],1)]):i("ul",[i("li",[i("checker",{attrs:{"radio-required":"","default-item-class":"check-item","selected-item-class":"check-item-selected"},model:{value:e.timeRange,callback:function(t){e.timeRange=t},expression:"timeRange"}},e._l(e.items1,function(t,s){return i("checker-item",{key:s,attrs:{value:t}},[e._v(e._s(t.value))])}),1)],1),e._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:2==e.tip,expression:"tip==2"}]},[i("checker",{attrs:{"default-item-class":"check-item","selected-item-class":"check-item-selected"},model:{value:e.arriveStore,callback:function(t){e.arriveStore=t},expression:"arriveStore"}},e._l(e.arriveStoreArr,function(t,s){return i("checker-item",{key:s,attrs:{value:t}},[e._v(e._s(t.value))])}),1)],1),e._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:6==e.tip,expression:"tip==6"}]},[i("checker",{attrs:{"default-item-class":"check-item","selected-item-class":"check-item-selected"},model:{value:e.getBack,callback:function(t){e.getBack=t},expression:"getBack"}},e._l(e.getBackArr,function(t,s){return i("checker-item",{key:s,attrs:{value:t}},[e._v(e._s(t.value))])}),1)],1)])])]),e._v(" "),i("scroll",{ref:"scroll",staticClass:"scroll-wrapper",style:0==e.tip||2==e.tip||6==e.tip?"top:126px;":"top:92px;",attrs:{listenScroll:e.listenScroll,pullup:e.pullup},on:{scrollToEnd:e.loadMore}},[i("div",[e._l(e.customerArr,function(t,s){return i("div",{key:s,staticClass:"box",on:{click:function(i){return e.toDetailView(t.id,e.tip)}}},[i("p",[e._v("\n              "+e._s(t.name)),i("span",{staticClass:"spanFr"},[i("i",{directives:[{name:"show",rawName:"v-show",value:t.srvcTypes&&-1!=t.srvcTypes.indexOf("1"),expression:"item.srvcTypes&&item.srvcTypes.indexOf('1')!=-1"}],staticClass:"icon-jingshuiqi",attrs:{slot:"icon"},slot:"icon"}),e._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:t.srvcTypes&&-1!=t.srvcTypes.indexOf("2"),expression:"item.srvcTypes&&item.srvcTypes.indexOf('2')!=-1"}],staticClass:"icon-meishijiaozuo",attrs:{slot:"icon"},slot:"icon"}),e._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:t.srvcTypes&&-1!=t.srvcTypes.indexOf("3"),expression:"item.srvcTypes&&item.srvcTypes.indexOf('3')!=-1"}],staticClass:"icon-guoju",attrs:{slot:"icon"},slot:"icon"}),e._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:t.srvcTypes&&-1!=t.srvcTypes.indexOf("4"),expression:"item.srvcTypes&&item.srvcTypes.indexOf('4')!=-1"}],staticClass:"icon-jiantao",attrs:{slot:"icon"},slot:"icon"}),e._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:t.srvcTypes&&-1!=t.srvcTypes.indexOf("5"),expression:"item.srvcTypes&&item.srvcTypes.indexOf('5')!=-1"}],staticClass:"icon-baojianpin",attrs:{slot:"icon"},slot:"icon"}),e._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:t.srvcTypes&&-1!=t.srvcTypes.indexOf("6"),expression:"item.srvcTypes&&item.srvcTypes.indexOf('6')!=-1"}],staticClass:"icon-xianqiaohu",attrs:{slot:"icon"},slot:"icon"})])]),e._v(" "),i("p",[e._v("\n              "+e._s(t.phoneNo)),i("span",{staticClass:"spanFr"},[e._v(e._s(0==e.tip?"创建时间":5==e.tip?"服用结束时间":"服务时间")+"："+e._s(t.createTime))])])])}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.inited,expression:"inited"}],staticClass:"loading-container"},[i("loading",{attrs:{title:"数据加载中..."}})],1),e._v(" "),i("divider",{directives:[{name:"show",rawName:"v-show",value:!e.hasMore&&e.customerArr.length,expression:"!hasMore && customerArr.length"}]},[e._v("没有更多了...")])],2)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.customerArr.length&&!e.inited,expression:"!customerArr.length && !inited"}],staticClass:"no-result"},[i("i",{staticClass:"icon-no"}),e._v(" "),i("p",[e._v("暂无数据")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:0==e.tip&&""==e.proType.key,expression:"tip==0&&proType.key==''"}]},[i("p",[e._v("没有"+e._s(this.phoneNo)+"存档")]),e._v(" "),i("p",[e._v("是否创建该客户档案？")]),e._v(" "),i("button",{staticClass:"addCusBtn",on:{click:e.toAddView}},[e._v("创建客户")])])])],1)],1)])},h=[];l._withStripped=!0;var d={render:l,staticRenderFns:h},m=d,v=!1,f=i("VU/8"),x=s,y=f(u,m,!1,x,null,null);y.options.__file="src/components/customer/customerList.vue";t.default=y.exports},k24w:function(e,t,i){var s=i("wHCu");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);i("rjj0")("8a82c984",s,!1,{})},wHCu:function(e,t,i){t=e.exports=i("FZ+f")(!1),t.push([e.i,"\n.customerList-wrapper .no-result {\n  text-align: center;\n  position: absolute;\n  width: 100%;\n  top: 40%;\n  color: #c9c9c9;\n}\n.customerList-wrapper .no-result .addCusBtn {\n  background: #ec6868;\n  color: #fff;\n  width: 20%;\n  margin: 10px auto;\n  padding: 6px;\n  border: none;\n  border-radius: 6px;\n}\n.customerList-wrapper .no-result i {\n  font-size: 90px;\n}\n.customerList-wrapper .no-result p {\n  font-size: 15px;\n}\n.customerList-wrapper .loading-container {\n  margin-top: 20px;\n}\n.customerList-wrapper .iconfr {\n  float: right;\n  margin-top: 15px;\n  margin-left: 4px;\n}\n.customerList-wrapper .content {\n  width: 100%;\n  position: absolute;\n  left: 0;\n  top: 44px;\n  overflow-y: scroll;\n  bottom: 0;\n  right: 0;\n  overflow: hidden;\n  -webkit-overflow-scrolling: touch;\n}\n.customerList-wrapper .content .customerListTop {\n  background-color: #fff;\n}\n.customerList-wrapper .content .customerListTop .search-box {\n  width: 90%;\n  margin: 0 auto;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  padding: 10px 0;\n}\n.customerList-wrapper .content .customerListTop .input-box {\n  position: relative;\n  width: 72%;\n  height: 26px;\n  background: #f8f8f8;\n  border: 1px solid #e4e4e4;\n  border-radius: 15px;\n  padding: 0 6px;\n}\n.customerList-wrapper .content .customerListTop .input-box input {\n  width: 90%;\n  height: 26px;\n  background: none;\n  border: none;\n  color: #bfbfbf;\n}\n.customerList-wrapper .content .customerListTop .input-box input::-webkit-input-placeholder {\n  color: #bfbfbf;\n}\n.customerList-wrapper .content .customerListTop .addBtn {\n  width: 18%;\n  height: 26px;\n  line-height: 26px;\n  border: 1px solid #ec6868;\n  text-align: center;\n  border-radius: 15px;\n  color: #ec6868;\n}\n.customerList-wrapper .content .customerListTop .searchBtn li {\n  padding: 6px 0;\n  padding-left: 5%;\n  border-top: 1px solid #eee;\n}\n.customerList-wrapper .content .customerListTop .searchBtn .myCustomer .check-item {\n  margin-bottom: 6px;\n}\n.customerList-wrapper .content .customerListTop .check-item {\n  border: 1px solid #fff;\n  color: #b5c3c3;\n  height: 20px;\n  line-height: 20px;\n  padding: 0px 14px;\n  border-radius: 10px;\n  margin-right: 6px;\n}\n.customerList-wrapper .content .customerListTop .check-item-selected {\n  border: 1px solid #ec6868;\n  background: #ec6868;\n  color: #fff;\n}\n.customerList-wrapper .content .box {\n  width: 96%;\n  margin: 0 auto;\n  margin-bottom: 10px;\n  background-color: #fff;\n  border-radius: 5px;\n  padding: 10px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.customerList-wrapper .content .box p {\n  line-height: 20px;\n  text-align: left;\n  color: #a9a9a9;\n  overflow: hidden;\n}\n.customerList-wrapper .content .box p .spanFr {\n  float: right;\n}\n.customerList-wrapper .content .box p .spanFr .icon-jingshuiqi {\n  color: #3996f6;\n}\n.customerList-wrapper .content .box p .spanFr .icon-meishijiaozuo {\n  color: #f3c200;\n}\n.customerList-wrapper .content .box p .spanFr .icon-guoju {\n  color: #a6b0b9;\n}\n.customerList-wrapper .content .box p .spanFr .icon-jiantao {\n  color: #ff8f0b;\n}\n.customerList-wrapper .content .box p .spanFr .icon-baojianpin {\n  color: #7ed445;\n}\n.customerList-wrapper .content .box p .spanFr .icon-xianqiaohu {\n  color: #f87f7f;\n}\n.customerList-wrapper .content .box p:first-child {\n  color: #43484b;\n}\n",""])}});
//# sourceMappingURL=60.8388e51ef151ad76c99f.js.map