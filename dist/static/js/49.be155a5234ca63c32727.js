webpackJsonp([49],{NpKY:function(e,t,n){var a=n("vIwW");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("5d46b9a6",a,!1,{})},eD3l:function(e,t,n){"use strict";function a(e){g||n("NpKY")}Object.defineProperty(t,"__esModule",{value:!0});var o=n("ABCa"),i=n("1DHf"),r=n("Msp2"),l=n("UNGY"),s=n("ujWF"),p=(o.a,i.a,r.a,l.a,{data:function(){return{graduationStatus:"",graduationInfo:{},progressArr:[{label:"提交",value:0},{label:"PCD",value:2},{label:"PM",value:2.1},{label:"区域",value:3},{label:"渠道",value:4},{label:"完成",value:4}],userInfo:{},reasonText:"",cargoHandlingText:"",reason:"",cargoHandling:"",closeDate:"",graduation_reason:[],cargo_handling:[],startDate:(new Date).format("yyyy-MM-dd"),endDate:new Date((new Date).getTime()+25056e5).format("yyyy-MM-dd"),ifReason:!1,ifCargo:!1,inited:!1}},methods:{goBack:function(){this.$util.getMachine(4)},showSelector:function(){this.ifReason=!0},showCargoSelector:function(){this.ifCargo=!0},setReason:function(e,t){this.reasonText=t.label,this.reason=e},setCargo:function(e,t){this.cargoHandlingText=t.label,this.cargoHandling=e},resubmit:function(){this._getDicts(),this.graduationStatus=!1},submit:function(){var e=this;if(this.inited)return void this.$vux.toast.text("拼命请求中，请稍候~");Object(s.d)(this,this.reason,"关店原因")&&Object(s.d)(this,this.cargoHandling,"关店后货物处理")&&Object(s.d)(this,this.closeDate,"实际关店日期")&&(this.inited=!0,this.$tupHttp(this,"/front/user/graduation/submit","POST",{reason:this.reason,cargoHandling:this.cargoHandling,closeDate:this.closeDate}).then(function(t){e.$vux.toast.text("提交成功！"),setTimeout(function(){e.$router.go(-1)},500)},function(){e.inited=!1}).catch(function(){e.inited=!1}))},_graduationInfo:function(){var e=this;this.$tupHttp(this,"front/user/graduation/info").then(function(t){if(t.data.model&&!t.data.model.overReCommit){e.graduationStatus=!0;var n=t.data.model.auditStatus;2===n||8===n?n=2.1:7===n?n=2:-7===n?n=-2:-8===n&&(n=-2.1),t.data.model.auditStatus=n,e.graduationInfo=t.data.model}else e._getDicts(),e.graduationStatus=!1})},_getInfo:function(){var e=this;this.$tupHttp(this,"front/user/info/v1").then(function(t){e.userInfo=t.data.model,e.userInfo.pOpenningDate=e.userInfo.pOpenningDate?new Date(e.userInfo.pOpenningDate).format("yyyy-MM-dd"):e.userInfo.pOpenningDate,e.userInfo.pFirstorderDate=e.userInfo.pFirstorderDate?new Date(e.userInfo.pFirstorderDate).format("yyyy-MM-dd"):e.userInfo.pFirstorderDate,e.userInfo.pGraduationDate=e.userInfo.pGraduationDate?new Date(e.userInfo.pGraduationDate).format("yyyy-MM-dd"):e.userInfo.pGraduationDate})},_getDicts:function(){var e=this,t=["graduation_reason_new","cargo_handling"];this.$tupHttp(this,"front/dict/getDicts","POST",t).then(function(t){e.graduation_reason=t.data.model.graduation_reason_new.map(function(e,t){var n={};return n.label=e.dictName,n.value=e.dictValue,n}),e.cargo_handling=t.data.model.cargo_handling.map(function(e,t){var n={};return n.label=e.dictName,n.value=e.dictValue,n})})}},created:function(){this._graduationInfo(),this._getInfo()},components:{XHeader:o.a,Cell:i.a,Actionsheet:r.a,Datetime:l.a}}),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"complete-apply-wrapper"},[n("x-header",{staticClass:"vux-1px-b",attrs:{title:"结业申请","left-options":{backText:"",preventGoBack:!0}},on:{"on-click-back":e.goBack}}),e._v(" "),!1===e.graduationStatus?n("div",{staticClass:"complete-wrapper"},[n("div",{staticClass:"complete-text"},[e._v("\n      提醒：请保证专卖店已经实际完成结业流程，并且获得区域公司的确认后，在此发起结业申请操作。一旦线上审批通过，店铺将无法登录并使用系统。\n    ")]),e._v(" "),e.userInfo&&e.userInfo.pUid?n("div",{staticClass:"complete-content"},[n("cell",{staticStyle:{"font-weight":"bold"},attrs:{title:"确认基本信息并选择关店原因"}}),e._v(" "),n("cell",{attrs:{title:"区域"},model:{value:e.userInfo.pCitregionoffice,callback:function(t){e.$set(e.userInfo,"pCitregionoffice",t)},expression:"userInfo.pCitregionoffice"}}),e._v(" "),n("cell",{attrs:{title:"省办"},model:{value:e.userInfo.pCitprovincialoffice,callback:function(t){e.$set(e.userInfo,"pCitprovincialoffice",t)},expression:"userInfo.pCitprovincialoffice"}}),e._v(" "),n("cell",{attrs:{title:"城市"},model:{value:e.userInfo.pCityno,callback:function(t){e.$set(e.userInfo,"pCityno",t)},expression:"userInfo.pCityno"}}),e._v(" "),n("cell",{attrs:{title:"片区"},model:{value:e.userInfo.pDistrictoffice,callback:function(t){e.$set(e.userInfo,"pDistrictoffice",t)},expression:"userInfo.pDistrictoffice"}}),e._v(" "),n("cell",{attrs:{title:"城市级别"},model:{value:e.userInfo.pCitylevel,callback:function(t){e.$set(e.userInfo,"pCitylevel",t)},expression:"userInfo.pCitylevel"}}),e._v(" "),n("cell",{attrs:{title:"专卖店编号"},model:{value:e.userInfo.pUid,callback:function(t){e.$set(e.userInfo,"pUid",t)},expression:"userInfo.pUid"}}),e._v(" "),n("cell",{attrs:{title:"专卖店地址"},model:{value:e.userInfo.pAddress2,callback:function(t){e.$set(e.userInfo,"pAddress2",t)},expression:"userInfo.pAddress2"}}),e._v(" "),n("cell",{attrs:{title:"专卖店状态"},model:{value:e.userInfo.pOutletStatus,callback:function(t){e.$set(e.userInfo,"pOutletStatus",t)},expression:"userInfo.pOutletStatus"}}),e._v(" "),n("cell",{attrs:{title:"开业日期"},model:{value:e.userInfo.pOpenningDate,callback:function(t){e.$set(e.userInfo,"pOpenningDate",t)},expression:"userInfo.pOpenningDate"}}),e._v(" "),n("cell",{attrs:{title:"首订日期"},model:{value:e.userInfo.pFirstorderDate,callback:function(t){e.$set(e.userInfo,"pFirstorderDate",t)},expression:"userInfo.pFirstorderDate"}}),e._v(" "),n("cell",{attrs:{title:"结业日期"},model:{value:e.userInfo.pGraduationDate,callback:function(t){e.$set(e.userInfo,"pGraduationDate",t)},expression:"userInfo.pGraduationDate"}}),e._v(" "),n("cell",{attrs:{title:"关店原因","is-link":""},nativeOn:{click:function(t){return e.showSelector(t)}},model:{value:e.reasonText,callback:function(t){e.reasonText=t},expression:"reasonText"}}),e._v(" "),n("cell",{attrs:{title:"关店后货物处理","is-link":""},nativeOn:{click:function(t){return e.showCargoSelector(t)}},model:{value:e.cargoHandlingText,callback:function(t){e.cargoHandlingText=t},expression:"cargoHandlingText"}}),e._v(" "),n("datetime",{attrs:{title:"实际关店日期",placeholder:"请选择实际关店日期","start-date":e.startDate,"end-date":e.endDate},model:{value:e.closeDate,callback:function(t){e.closeDate=t},expression:"closeDate"}})],1):e._e()]):e._e(),e._v(" "),!1===e.graduationStatus?n("div",{staticClass:"complete-btn",on:{click:e.submit}},[n("div",[e._v("提交结业申请")])]):e._e(),e._v(" "),!0===e.graduationStatus?n("div",{staticClass:"complete-wrapper complete-wrapper2"},[n("div",{staticClass:"complete-text"},[e._v("\n      "+e._s(e.graduationInfo.auditStatus>=0?"申请已提交，审核中":"申请未能通过审核，"+e.graduationInfo.steps[e.graduationInfo.steps.length-1].remark+"，审核理由："+e.graduationInfo.steps[e.graduationInfo.steps.length-1].comment)+"\n    ")]),e._v(" "),n("div",{staticClass:"progress"},[n("ul",e._l(e.progressArr,function(t,a){return n("li",[n("div",{staticClass:"head"},[n("div",{staticClass:"circle"},[e.graduationInfo.auditStatus>=0&&t.value<=e.graduationInfo.auditStatus||e.graduationInfo.auditStatus<0&&t.value<Math.abs(e.graduationInfo.auditStatus)?n("div",{staticClass:"select"},[n("i",{staticClass:"icon-select"})]):e._e()]),e._v(" "),a!==e.progressArr.length-1?n("div",{staticClass:"line",class:{selected:e.graduationInfo.auditStatus>=0&&t.value<=e.graduationInfo.auditStatus||e.graduationInfo.auditStatus<0&&t.value<Math.abs(e.graduationInfo.auditStatus)}}):e._e()]),e._v(" "),n("div",{staticClass:"main"},[e._v(e._s(t.label))])])}),0)]),e._v(" "),n("div",{staticClass:"complete-info vux-1px-b"},[n("p",[n("span",[e._v("创建时间：")]),e._v(" "),n("span",[e._v(e._s(new Date(e.graduationInfo.createTime).format("yyyy-MM-dd hh:mm:ss")))])]),e._v(" "),n("p",[n("span",[e._v("创建人：")]),e._v(" "),n("span",[e._v(e._s(e.graduationInfo.creator))])])]),e._v(" "),e.userInfo&&e.userInfo.pUid?n("div",{staticClass:"complete-content"},[n("cell",{attrs:{title:"区域"},model:{value:e.userInfo.pCitregionoffice,callback:function(t){e.$set(e.userInfo,"pCitregionoffice",t)},expression:"userInfo.pCitregionoffice"}}),e._v(" "),n("cell",{attrs:{title:"省办"},model:{value:e.userInfo.pCitprovincialoffice,callback:function(t){e.$set(e.userInfo,"pCitprovincialoffice",t)},expression:"userInfo.pCitprovincialoffice"}}),e._v(" "),n("cell",{attrs:{title:"城市"},model:{value:e.userInfo.pCityno,callback:function(t){e.$set(e.userInfo,"pCityno",t)},expression:"userInfo.pCityno"}}),e._v(" "),n("cell",{attrs:{title:"片区"},model:{value:e.userInfo.pDistrictoffice,callback:function(t){e.$set(e.userInfo,"pDistrictoffice",t)},expression:"userInfo.pDistrictoffice"}}),e._v(" "),n("cell",{attrs:{title:"城市级别"},model:{value:e.userInfo.pCitylevel,callback:function(t){e.$set(e.userInfo,"pCitylevel",t)},expression:"userInfo.pCitylevel"}}),e._v(" "),n("cell",{attrs:{title:"专卖店编号"},model:{value:e.userInfo.pUid,callback:function(t){e.$set(e.userInfo,"pUid",t)},expression:"userInfo.pUid"}}),e._v(" "),n("cell",{attrs:{title:"专卖店地址"},model:{value:e.userInfo.pAddress2,callback:function(t){e.$set(e.userInfo,"pAddress2",t)},expression:"userInfo.pAddress2"}}),e._v(" "),n("cell",{attrs:{title:"专卖店状态"},model:{value:e.userInfo.pOutletStatus,callback:function(t){e.$set(e.userInfo,"pOutletStatus",t)},expression:"userInfo.pOutletStatus"}}),e._v(" "),n("cell",{attrs:{title:"开业日期"},model:{value:e.userInfo.pOpenningDate,callback:function(t){e.$set(e.userInfo,"pOpenningDate",t)},expression:"userInfo.pOpenningDate"}}),e._v(" "),n("cell",{attrs:{title:"首订日期"},model:{value:e.userInfo.pFirstorderDate,callback:function(t){e.$set(e.userInfo,"pFirstorderDate",t)},expression:"userInfo.pFirstorderDate"}}),e._v(" "),n("cell",{attrs:{title:"结业日期"},model:{value:e.userInfo.pGraduationDate,callback:function(t){e.$set(e.userInfo,"pGraduationDate",t)},expression:"userInfo.pGraduationDate"}}),e._v(" "),n("cell",{attrs:{title:"关店原因"},model:{value:e.graduationInfo.reason,callback:function(t){e.$set(e.graduationInfo,"reason",t)},expression:"graduationInfo.reason"}}),e._v(" "),n("cell",{attrs:{title:"关店后货物处理"},model:{value:e.graduationInfo.cargoHandling,callback:function(t){e.$set(e.graduationInfo,"cargoHandling",t)},expression:"graduationInfo.cargoHandling"}}),e._v(" "),n("cell",{attrs:{title:"实际关店日期",value:e.graduationInfo.closeDate?new Date(e.graduationInfo.closeDate).format("yyyy-MM-dd"):""}})],1):e._e(),e._v(" "),e.graduationInfo.auditStatus<0?n("div",{staticClass:"complete-btn",staticStyle:{position:"relative",background:"none"},on:{click:e.resubmit}},[n("div",[e._v("重新申请")])]):e._e()]):e._e(),e._v(" "),n("actionsheet",{attrs:{menus:e.graduation_reason},on:{"on-click-menu":e.setReason},model:{value:e.ifReason,callback:function(t){e.ifReason=t},expression:"ifReason"}}),e._v(" "),n("actionsheet",{attrs:{menus:e.cargo_handling},on:{"on-click-menu":e.setCargo},model:{value:e.ifCargo,callback:function(t){e.ifCargo=t},expression:"ifCargo"}})],1)},u=[];c._withStripped=!0;var f={render:c,staticRenderFns:u},d=f,g=!1,v=n("VU/8"),m=a,I=v(p,d,!1,m,null,null);I.options.__file="src/components/mine/completeApply.vue";t.default=I.exports},vIwW:function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,'\n.complete-apply-wrapper .progress {\n  background-color: #ec6868;\n  height: 65px;\n  width: 100%;\n  margin-top: -1px;\n}\n.complete-apply-wrapper .progress ul {\n  width: 85%;\n  margin: 0 auto;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  padding-top: 10px;\n}\n.complete-apply-wrapper .progress ul li {\n  list-style: none;\n  -ms-flex-preferred-size: 25%;\n      flex-basis: 25%;\n}\n.complete-apply-wrapper .progress ul li .head {\n  text-align: center;\n  position: relative;\n}\n.complete-apply-wrapper .progress ul li .head .circle {\n  background-color: #cb5555;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  margin: 4px auto 0;\n  padding: 3px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.complete-apply-wrapper .progress ul li .head .circle .select {\n  width: 14px;\n  height: 14px;\n  position: relative;\n  border-radius: 50%;\n  background-color: #fff;\n}\n.complete-apply-wrapper .progress ul li .head .circle i {\n  color: #ec6868;\n  position: absolute;\n  top: 2px;\n  left: 1px;\n}\n.complete-apply-wrapper .progress ul li .head .line {\n  height: 1px;\n  background-color: #cb5555;\n  position: absolute;\n  left: 70%;\n  right: -30%;\n  top: 9px;\n}\n.complete-apply-wrapper .progress ul li .head .line.selected {\n  background-color: #fff;\n}\n.complete-apply-wrapper .progress ul li .main {\n  text-align: center;\n  color: #fcb5b5;\n  font-size: 10px;\n  margin-top: 3px;\n}\n.complete-apply-wrapper .weui-actionsheet__menu {\n  max-height: 400px;\n  overflow-y: scroll;\n}\n.complete-apply-wrapper .complete-wrapper {\n  position: absolute;\n  top: 44px;\n  width: 100%;\n  bottom: 53px;\n  overflow-y: scroll;\n}\n.complete-apply-wrapper .complete-text {\n  background-color: #fff2c5;\n  color: #cc8b2e;\n  padding: 12px 0.36rem;\n}\n.complete-apply-wrapper .complete-content {\n  background-color: #fff;\n  margin-bottom: 20px;\n}\n.complete-apply-wrapper .complete-content .weui-cell__ft {\n  max-width: 65%;\n}\n.complete-apply-wrapper .complete-btn {\n  height: 50px;\n  background-color: #fff;\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n}\n.complete-apply-wrapper .complete-btn div {\n  height: 35px;\n  line-height: 35px;\n  text-align: center;\n  margin: 7px auto 0;\n  background-color: #ec6868;\n  color: #fff;\n  width: 60%;\n  border-radius: 20px;\n}\n.complete-apply-wrapper .complete-wrapper2 {\n  bottom: 0;\n}\n.complete-apply-wrapper .complete-wrapper2 .complete-text {\n  padding: 10px 0.36rem;\n  text-align: center;\n}\n.complete-apply-wrapper .complete-wrapper2 .complete-info {\n  padding: 6px 13px;\n  background-color: #fff;\n  margin-bottom: 6px;\n}\n.complete-apply-wrapper .complete-wrapper2 .complete-info p {\n  font-size: 13px;\n  line-height: 30px;\n}\n.complete-apply-wrapper .complete-wrapper2 .complete-info p span:nth-child(2) {\n  float: right;\n}\n.complete-apply-wrapper .weui-cell_access .weui-cell__ft {\n  position: relative;\n  padding-right: 13px;\n}\n.complete-apply-wrapper .weui-cell_access .weui-cell__ft:after {\n  content: " ";\n  display: inline-block;\n  height: 6px;\n  width: 6px;\n  border-width: 2px 2px 0 0;\n  border-color: #c8c8cd;\n  border-style: solid;\n  -webkit-transform: matrix(0.71, 0.71, -0.71, 0.71, 0, 0);\n  transform: matrix(0.71, 0.71, -0.71, 0.71, 0, 0);\n  position: relative;\n  top: -2px;\n  position: absolute;\n  top: 50%;\n  margin-top: -4px;\n  right: 2px;\n}\n',""])}});
//# sourceMappingURL=49.be155a5234ca63c32727.js.map