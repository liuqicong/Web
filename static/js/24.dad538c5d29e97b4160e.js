webpackJsonp([24],{"2C9i":function(t,o,e){o=t.exports=e("FZ+f")(!1),o.push([t.i,"\n.login-wrapper[data-v-dd7a443a] {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background-color: #fff;\n  text-align: center;\n}\n.login-wrapper .title[data-v-dd7a443a] {\n  color: #ec6868;\n  margin-top: 1.4rem;\n  font-size: 36px;\n}\n.login-wrapper .remarks[data-v-dd7a443a] {\n  font-size: 16px;\n}\n.login-wrapper .login-cotent[data-v-dd7a443a] {\n  width: 90%;\n  margin: .8rem auto 0;\n  position: relative;\n}\n.login-wrapper .login-cotent button[data-v-dd7a443a] {\n  margin-top: .5rem;\n}\n.login-wrapper .login-cotent i[data-v-dd7a443a] {\n  color: #ec6868;\n  margin-right: .2rem;\n}\n.login-wrapper .login-cotent .pass[data-v-dd7a443a] {\n  font-size: 16px;\n  color: #9b9b9b;\n  float: right;\n  padding: .1rem .2rem .2rem 0;\n}\n.login-wrapper .copyright[data-v-dd7a443a] {\n  margin-top: 2.5rem;\n  width: 100%;\n}\n",""])},EV1k:function(t,o,e){"use strict";function i(t){v||e("GMpl")}Object.defineProperty(o,"__esModule",{value:!0});var r=e("Dd8w"),n=e.n(r),a=e("rHil"),s=e("pDNl"),p=e("2sLL"),l=e("ujWF"),c=e("NYxO"),d=e("FWaR"),u=(s.a,a.a,p.a,n()({toForget:function(){this.$router.push({path:"/forgetPass"})},toLogin:function(){if(this.inited)return void this.$vux.toast.text("拼命登录中，请稍候~");Object(l.d)(this,this.clientId,"客户ID")&&Object(l.d)(this,this.password,"登录密码")&&this._login()},_login:function(){var t=this,o={clientId:this.clientId,password:this.password,platform:"WEB",application:"会生意H5"};this.storeEmployeeGroup=11===this.clientId.length?0:1;var e=11===this.clientId.length?"mss-store-service/storeEmployee/storeEmployeeLogin":"front/login/";11===this.clientId.length&&(o.storeEmployeeGroup=0,o.pwd=this.password,delete o.password),this.inited=!0,this.$tupHttp(this,e,"POST",o).then(function(o){var e=o.data;d.a.set("TUP_token",e.extra.token),d.a.set("TUP_pUid",t.storeEmployeeGroup?e.model.pUid:e.extra.employeeCode),d.a.set("TUP_psw",t.password),d.a.set("TUP_group",t.storeEmployeeGroup),d.a.set("TUP_pCitprovincialoffice",e.model.pCitprovincialoffice),d.a.set("TUP_pFirstOrderFlag",e.model.pFirstOrderFlag),d.a.set("TUP_pFirstorderDate",e.model.pFirstorderDate),d.a.set("TUP_pIsEmailActive",e.model.pIsEmailActive),d.a.set("TUP_pInfo",{pCitoutletproperty2:e.model.pCitoutletproperty2}),d.a.set("TUP_pCitorganlevel",e.model.pCitorganlevel),d.a.set("TUP_pAllowBusiness",e.model.pAllowBusiness),d.a.set("TUP_accountVisible",!0),d.a.set("TUP_pActiveProvince",e.model.pActiveProvince),d.a.set("TUP_pActiveCity",e.model.pActiveCity),d.a.set("TUP_pActiveArea",e.model.pActiveArea),"5"===e.model.pCitorganlevel?(t.clearCart(),t.$router.replace({path:t.redirect||"/"})):0!==t.storeEmployeeGroup?t._getLineCart():t.$router.replace({path:t.redirect||"/"})},function(){t.inited=!1}).catch(function(){t.inited=!1})},_getLineCart:function(){var t=this;this.$tupHttp(this,"front/shoppingCart/load").then(function(o){t.$tupHttp(t,"front/shoppingCart/getClientGiftProducts").then(function(e){var i=o.data.model;i?(i.promotions&&i.promotions.length&&(i.promotions=i.promotions.filter(function(t){return!(3===t.type||1===t.isMust)})),i.products&&i.products.length&&(i.products=i.products.filter(function(t){return!t.mustQty})),t.initCart={promotion:i.promotions||[],product:i.products||[],giftProducts:e.data.models||[],needGiftProduct:1}):t.initCart={promotion:[],product:[],giftProducts:e.data.models||[],needGiftProduct:1},t._selectMustPromotionsOrProducts()},function(){t.inited=!1}).catch(function(){t.inited=!1})},function(){t.inited=!1}).catch(function(){t.inited=!1})},_selectMustPromotionsOrProducts:function(){var t=this;this.$tupHttp(this,"front/product/selectMustPromotionsOrProducts").then(function(o){var e=o.data.model;e&&(e.promotionItemVOS=e.promotionItemVOS.map(function(o){for(var e=0;e<t.initCart.promotion.length;e++)o.id===t.initCart.promotion[e].id&&t.initCart.promotion.splice(e,1);return o.promotionRuleVO.productList.map(function(t){return t.isHave&&(t.selected=!0),t.mustQty&&(t.selected=!0,t.shopCartNum=t.mustQty),4===o.type&&(o.selected=!0,t.selected=!0,t.shopCartNum=t.productNum,(t.shopCartNum<t.mustQty||t.shopCartNum<t.mqq||null!==t.availableQty&&t.shopCartNum>t.availableQty)&&(o.isNotmm=!0)),t}),o.shopCartNum=1,o.ifEdit=!1,o.keyProductPrice=0,o.promotionTotalPrice=0,o}),t.initCart.promotion=t.initCart.promotion.concat(e.promotionItemVOS),null!==d.a.get("TUP_pFirstorderDate")&&(e.solrProductVos=e.solrProductVos.map(function(o){for(var e=0;e<t.initCart.product.length;e++)o.pCode===t.initCart.product[e].pCode&&t.initCart.product.splice(e,1);return o.shopCartNum=o.mustQty,o.selected=!0,o}),t.initCart.product=t.initCart.product.concat(e.solrProductVos))),t._getFullDiscount()},function(){t.inited=!1}).catch(function(){t.inited=!1})},_getFullDiscount:function(){var t=this;this.$tupHttp(this,"front/product/selectPromotionsByClientIdFromSolr?subType=0").then(function(o){for(var e=o.data.models,i=0,r=e.length;i<r;i++)e[i].promotionRuleVO.productList=[],e[i].ifEdit=!1,e[i].keyProductPrice=0,e[i].promotionTotalPrice=0,t.initCart.promotion=t.initCart.promotion.concat(e[i]);d.a.set("TUP_cart",t.initCart),t.saveCart({type:3,item:{product:t.initCart.product,promotion:t.initCart.promotion},isManual:0}),t.$router.replace({path:t.redirect||"/"})},function(){t.inited=!1}).catch(function(){t.inited=!1})},_getAppLoginData:function(){var t=this;this.$tupHttp(this,"front/user/info/v1").then(function(o){var e=o.data.model;d.a.set("TUP_pCitprovincialoffice",e.pCitprovincialoffice),d.a.set("TUP_pFirstOrderFlag",e.pFirstOrderFlag),d.a.set("TUP_pFirstorderDate",e.pFirstorderDate),d.a.set("TUP_pIsEmailActive",!0),d.a.set("TUP_pInfo",{pCitoutletproperty2:e.model.pCitoutletproperty2}),d.a.set("TUP_pCitorganlevel",e.pCitorganlevel),d.a.set("TUP_pAllowBusiness",e.pAllowBusiness),"5"===e.pCitorganlevel?(t.clearCart(),t.$router.push({path:t.redirect||"/"})):t._getTemporaryOrder()})}},Object(c.b)(["setPromotionCart","saveCart","clearCart"])),{components:{XInput:s.a,Group:a.a,XButton:p.a},data:function(){return{clientId:"",password:"",inited:!1,initCart:{},show:!1,redirect:"",storeEmployeeGroup:1}},methods:n()({toForget:function(){this.$router.push({path:"/forgetPass"})},toLogin:function(){if(this.inited)return void this.$vux.toast.text("拼命登录中，请稍候~");Object(l.d)(this,this.clientId,"客户ID")&&Object(l.d)(this,this.password,"登录密码")&&this._login()},_login:function(){var t=this,o={clientId:this.clientId,password:this.password,platform:"WEB",application:"会生意H5"};this.storeEmployeeGroup=11===this.clientId.length?0:1;var e=11===this.clientId.length?"mss-store-service/storeEmployee/storeEmployeeLogin":"front/login/";11===this.clientId.length&&(o.storeEmployeeGroup=0,o.pwd=this.password,delete o.password),this.inited=!0,this.$tupHttp(this,e,"POST",o).then(function(o){var e=o.data;d.a.set("TUP_token",e.extra.token),d.a.set("TUP_pUid",t.storeEmployeeGroup?e.model.pUid:e.extra.employeeCode),d.a.set("TUP_psw",t.password),d.a.set("TUP_group",t.storeEmployeeGroup),d.a.set("TUP_pCitprovincialoffice",e.model.pCitprovincialoffice),d.a.set("TUP_pFirstOrderFlag",e.model.pFirstOrderFlag),d.a.set("TUP_pFirstorderDate",e.model.pFirstorderDate),d.a.set("TUP_pIsEmailActive",e.model.pIsEmailActive),d.a.set("TUP_pInfo",{pCitoutletproperty2:e.model.pCitoutletproperty2}),d.a.set("TUP_pCitorganlevel",e.model.pCitorganlevel),d.a.set("TUP_pAllowBusiness",e.model.pAllowBusiness),d.a.set("TUP_accountVisible",!0),d.a.set("TUP_pActiveProvince",e.model.pActiveProvince),d.a.set("TUP_pActiveCity",e.model.pActiveCity),d.a.set("TUP_pActiveArea",e.model.pActiveArea),"5"===e.model.pCitorganlevel?(t.clearCart(),t.$router.replace({path:t.redirect||"/"})):0!==t.storeEmployeeGroup?t._getLineCart():t.$router.replace({path:t.redirect||"/"})},function(){t.inited=!1}).catch(function(){t.inited=!1})},_getLineCart:function(){var t=this;this.$tupHttp(this,"front/shoppingCart/load").then(function(o){t.$tupHttp(t,"front/shoppingCart/getClientGiftProducts").then(function(e){var i=o.data.model;i?(i.promotions&&i.promotions.length&&(i.promotions=i.promotions.filter(function(t){return!(3===t.type||1===t.isMust)})),i.products&&i.products.length&&(i.products=i.products.filter(function(t){return!t.mustQty})),t.initCart={promotion:i.promotions||[],product:i.products||[],giftProducts:e.data.models||[],needGiftProduct:1}):t.initCart={promotion:[],product:[],giftProducts:e.data.models||[],needGiftProduct:1},t._selectMustPromotionsOrProducts()},function(){t.inited=!1}).catch(function(){t.inited=!1})},function(){t.inited=!1}).catch(function(){t.inited=!1})},_selectMustPromotionsOrProducts:function(){var t=this;this.$tupHttp(this,"front/product/selectMustPromotionsOrProducts").then(function(o){var e=o.data.model;e&&(e.promotionItemVOS=e.promotionItemVOS.map(function(o){for(var e=0;e<t.initCart.promotion.length;e++)o.id===t.initCart.promotion[e].id&&t.initCart.promotion.splice(e,1);return o.promotionRuleVO.productList.map(function(t){return t.isHave&&(t.selected=!0),t.mustQty&&(t.selected=!0,t.shopCartNum=t.mustQty),4===o.type&&(o.selected=!0,t.selected=!0,t.shopCartNum=t.productNum,(t.shopCartNum<t.mustQty||t.shopCartNum<t.mqq||null!==t.availableQty&&t.shopCartNum>t.availableQty)&&(o.isNotmm=!0)),t}),o.shopCartNum=1,o.ifEdit=!1,o.keyProductPrice=0,o.promotionTotalPrice=0,o}),t.initCart.promotion=t.initCart.promotion.concat(e.promotionItemVOS),null!==d.a.get("TUP_pFirstorderDate")&&(e.solrProductVos=e.solrProductVos.map(function(o){for(var e=0;e<t.initCart.product.length;e++)o.pCode===t.initCart.product[e].pCode&&t.initCart.product.splice(e,1);return o.shopCartNum=o.mustQty,o.selected=!0,o}),t.initCart.product=t.initCart.product.concat(e.solrProductVos))),t._getFullDiscount()},function(){t.inited=!1}).catch(function(){t.inited=!1})},_getFullDiscount:function(){var t=this;this.$tupHttp(this,"front/product/selectPromotionsByClientIdFromSolr?subType=0").then(function(o){for(var e=o.data.models,i=0,r=e.length;i<r;i++)e[i].promotionRuleVO.productList=[],e[i].ifEdit=!1,e[i].keyProductPrice=0,e[i].promotionTotalPrice=0,t.initCart.promotion=t.initCart.promotion.concat(e[i]);d.a.set("TUP_cart",t.initCart),t.saveCart({type:3,item:{product:t.initCart.product,promotion:t.initCart.promotion},isManual:0}),t.$router.replace({path:t.redirect||"/"})},function(){t.inited=!1}).catch(function(){t.inited=!1})},_getAppLoginData:function(){var t=this;this.$tupHttp(this,"front/user/info/v1").then(function(o){var e=o.data.model;d.a.set("TUP_pCitprovincialoffice",e.pCitprovincialoffice),d.a.set("TUP_pFirstOrderFlag",e.pFirstOrderFlag),d.a.set("TUP_pFirstorderDate",e.pFirstorderDate),d.a.set("TUP_pIsEmailActive",!0),d.a.set("TUP_pInfo",{pCitoutletproperty2:e.model.pCitoutletproperty2}),d.a.set("TUP_pCitorganlevel",e.pCitorganlevel),d.a.set("TUP_pAllowBusiness",e.pAllowBusiness),"5"===e.pCitorganlevel?(t.clearCart(),t.$router.push({path:t.redirect||"/"})):t._getTemporaryOrder()})}},Object(c.b)(["setPromotionCart","saveCart","clearCart"])),created:function(){this.redirect=this.$route.query.redirect;var t=navigator.userAgent,o=t.indexOf("Android")>-1||t.indexOf("Linux")>-1,e=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);o||e||(this.show=!0)}}),m=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("transition",{attrs:{name:"slide"}},[e("div",{staticClass:"login-wrapper"},[t.show?e("div",[e("h1",{staticClass:"title"},[t._v("FMS")]),t._v(" "),e("span",{staticClass:"remarks"},[t._v("随时随地轻松管理你的订单！")]),t._v(" "),e("div",{staticClass:"login-cotent"},[e("group",[e("x-input",{attrs:{title:"title",placeholder:"请输入账号(客户ID)"},model:{value:t.clientId,callback:function(o){t.clientId=o},expression:"clientId"}},[e("i",{staticClass:"icon-me-",attrs:{slot:"label"},slot:"label"})])],1),t._v(" "),e("group",[e("x-input",{attrs:{title:"title",type:"password",placeholder:"请输入登录密码"},model:{value:t.password,callback:function(o){t.password=o},expression:"password"}},[e("i",{staticClass:"icon-password",attrs:{slot:"label"},slot:"label"})])],1),t._v(" "),e("x-button",{attrs:{type:"primary"},nativeOn:{click:function(o){return t.toLogin(o)}}},[t._v("登录")]),t._v(" "),e("div",{staticClass:"pass",on:{click:t.toForget}},[t._v("忘记密码")])],1)]):t._e()])])},h=[];m._withStripped=!0;var f={render:m,staticRenderFns:h},C=f,v=!1,g=e("VU/8"),P=i,_=g(u,C,!1,P,"data-v-dd7a443a",null);_.options.__file="src/components/login/login.vue";o.default=_.exports},GMpl:function(t,o,e){var i=e("2C9i");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e("rjj0")("5dee9270",i,!1,{})}});
//# sourceMappingURL=24.dad538c5d29e97b4160e.js.map