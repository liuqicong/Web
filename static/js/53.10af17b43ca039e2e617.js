webpackJsonp([53],{RSt4:function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,"\n.discount-wrapper .select-wrapper {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  background-color: #fff;\n  height: 35px;\n  line-height: 35px;\n}\n.discount-wrapper .select-wrapper > div {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.discount-wrapper .select-wrapper .time {\n  color: #9b9b9b;\n  text-indent: 10px;\n}\n.discount-wrapper .select {\n  height: 35px;\n  line-height: 35px;\n  text-align: center;\n  background-color: #fff;\n}\n.discount-wrapper .select.chose {\n  color: #ec6868;\n  font-weight: bold;\n}\n.discount-wrapper .select i {\n  font-size: 14px;\n  margin-left: 5px;\n  font-weight: normal;\n}\n.discount-wrapper .vux-datetime-value {\n  opacity: 0;\n}\n.discount-wrapper .scroll-wrapper {\n  top: 85px;\n}\n.discount-wrapper .scroll-wrapper .dis-content {\n  background-color: #fff;\n  padding: .14rem .3rem 0;\n}\n.discount-wrapper .scroll-wrapper .dis-content .dis-item {\n  color: #343434;\n}\n.discount-wrapper .scroll-wrapper .dis-content .dis-item span {\n  display: inline-block;\n}\n.discount-wrapper .scroll-wrapper .dis-content .dis-item .dis-name {\n  font-size: 15px;\n  font-weight: bold;\n}\n.discount-wrapper .scroll-wrapper .dis-content .dis-item .dis-money {\n  float: right;\n  font-size: 16px;\n  font-weight: bold;\n}\n.discount-wrapper .scroll-wrapper .dis-content .dis-item .dis-s {\n  color: #9b9b9b;\n  padding: .1rem 0;\n}\n.discount-wrapper .scroll-wrapper .dis-content .dis-item .dis-sheng {\n  float: right;\n}\n.discount-wrapper .no-result {\n  text-align: center;\n  position: absolute;\n  width: 100%;\n  top: 40%;\n  color: #c9c9c9;\n}\n.discount-wrapper .no-result i {\n  font-size: 90px;\n}\n.discount-wrapper .no-result p {\n  font-size: 15px;\n}\n.discount-wrapper .loading-container {\n  margin-top: 20px;\n}\n",""])},RZKX:function(t,e,i){var n=i("RSt4");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("8c322562",n,!1,{})},lvFq:function(t,e,i){"use strict";function n(t){m||i("RZKX")}Object.defineProperty(e,"__esModule",{value:!0});var s=i("ABCa"),o=i("rGqP"),a=i("UNGY"),r=i("Msp2"),c=i("ghf0"),l=i("/FMa"),p=(s.a,o.a,c.a,l.a,a.a,r.a,{components:{XHeader:s.a,Divider:o.a,Scroll:c.a,Loading:l.a,Datetime:a.a,Actionsheet:r.a},data:function(){return{disArr:[],listenScroll:!0,hasMore:!0,pageNo:1,time:"",billSource:"",visibility:!1,inited:!1,pullup:!0,typeMenu:{},typeSelected:!1,typeName:"全部"}},methods:{loadMore:function(){this.hasMore&&(this.pageNo++,this._getDiscountList())},change:function(){this.pageNo=1,this.disArr=[],this.hasMore=!0,this._getDiscountList()},toDetail:function(t){this.$router.push({path:"/discountDetail",query:{id:t}})},setType:function(t,e){this.billSource=t,this.typeName=e.label,this.pageNo=1,this.disArr=[],this.hasMore=!0,this._getDiscountList()},onCancel:function(){this.time="",this._getDiscountList()},formatePrice:function(t){return t/100},_getDiscountList:function(){var t=this;if(this.inited)return void this.$vux.toast.text("拼命请求中，请稍候");this.inited=!0;var e={pagingQuery:{pageIndex:this.pageNo,pageSize:20},billSource:this.billSource};this.time&&(e.startTime=this.time+"-01",e.endTime=this.$util.getMonthLastDay(this.time)),this.$tupHttp(this,"front/account/discount/v1","POST",e).then(function(e){t.inited=!1;var i=e.data.models.map(function(e){return e.amount=t.formatePrice(e.amount),e});1!==t.pageNo||t.disArr.length?t.disArr=t.disArr.concat(i):t.disArr=i,e.data.models.length<20&&(t.hasMore=!1),setTimeout(function(){t.$refs.scroll.refresh()},500)},function(){t.inited=!1}).catch(function(){t.inited=!1})},_getDicts:function(){var t=this,e=["bill_source"];this.$tupHttp(this,"front/dict/getDicts","POST",e).then(function(e){t.dicts=e.data.model,t.typeMenu=t.dicts.bill_source.map(function(t,e){var i={};return i.label=t.dictName,i.value=t.dictValue,i}),t.typeMenu.unshift({label:"全部",value:""})})}},created:function(){this._getDicts(),this._getDiscountList()}}),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide"}},[i("div",{staticClass:"discount-wrapper page-container"},[i("x-header",{staticClass:"vux-1px-b",attrs:{title:"折扣差流水","left-options":{backText:""}}}),t._v(" "),i("div",{staticClass:"select-wrapper"},[i("div",[i("span",{staticClass:"time"},[t._v("时间：")]),t._v(" "),i("div",{staticClass:"select",class:{chose:t.time},on:{click:function(e){t.visibility=!0}}},[t._v(t._s(t.time||"请选择查询时间")),i("i",{staticClass:"icon-down"})])]),t._v(" "),i("div",[i("span",{staticClass:"time"},[t._v("来源：")]),t._v(" "),i("div",{staticClass:"select chose",on:{click:function(e){t.typeSelected=!0}}},[t._v(t._s(t.typeName)),i("i",{staticClass:"icon-down"})])])]),t._v(" "),i("datetime",{attrs:{format:"YYYY-MM",show:t.visibility,"cancel-text":"重置"},on:{"update:show":function(e){t.visibility=e},"on-change":t.change,"on-cancel":t.onCancel},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}}),t._v(" "),i("actionsheet",{attrs:{menus:t.typeMenu},on:{"on-click-menu":t.setType},model:{value:t.typeSelected,callback:function(e){t.typeSelected=e},expression:"typeSelected"}}),t._v(" "),i("scroll",{ref:"scroll",staticClass:"scroll-wrapper",attrs:{listenScroll:t.listenScroll,pullup:t.pullup},on:{scrollToEnd:t.loadMore}},[i("div",[t._l(t.disArr,function(e,n){return i("div",{key:n.id,staticClass:"dis-content"},[i("div",{staticClass:"dis-item",class:{"vux-1px-b":n!==t.disArr.length-1},on:{click:function(i){return t.toDetail(e.id)}}},[i("p",[i("span",{staticClass:"dis-name"},[t._v(t._s(e.billSource)+"（"+t._s("折扣差"+e.type)+"）")]),t._v(" "),i("span",{staticClass:"dis-money"},[t._v(t._s(t.$util.formatThousand(e.amount)))])]),t._v(" "),i("p",{staticClass:"dis-s"},[i("span",{staticClass:"dis-time"},[t._v(t._s(e.createTime))])])])])}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.hasMore,expression:"hasMore"}],staticClass:"loading-container"},[i("loading",{attrs:{title:"数据加载中..."}})],1),t._v(" "),i("divider",{directives:[{name:"show",rawName:"v-show",value:!t.hasMore&&t.disArr.length,expression:"!hasMore && disArr.length"}]},[t._v("没有更多了...")])],2)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.disArr.length&&!t.inited,expression:"!disArr.length && !inited"}],staticClass:"no-result"},[i("i",{staticClass:"icon-no"}),t._v(" "),i("p",[t._v("暂无折扣差流水数据")])])],1)])},u=[];d._withStripped=!0;var h={render:d,staticRenderFns:u},f=h,m=!1,v=i("VU/8"),g=n,w=v(p,f,!1,g,null,null);w.options.__file="src/components/mine/discount.vue";e.default=w.exports}});
//# sourceMappingURL=53.10af17b43ca039e2e617.js.map